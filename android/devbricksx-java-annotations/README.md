# Devbricks X Java Annotations

This library provides a set of annotations which simplify the developement with [Android Room Library](https://developer.android.com/topic/libraries/architecture/room). It helps you to generate core elements which are required byAndroid Room Library. Basically, you can save around 100 lines of code per entity class.

## Installation
To use annotation and its compiler, add the following dependencies in build.gradle of your application.

#### Jcenter

```groovy
repositories { 
	jcenter()
}
```

#### Dependencies

```groovy
dependencies {
 	implementation "com.dailystudio:devbricksx-java-annotations:$devbricksx_version"

 	kapt "com.dailystudio:devbricksx-java-compiler:$devbricksx_version"
 	kapt "androidx.room:room-compiler:2.2.5"
}
```

#### Latest version

```groovy
devbricksx_version = "0.6.0"
```

The codes generated by this library require Android Room Library to compile. DO NOT forget to include **room-compiler** in dependencies.

## Quick Sample

To quick start with our library, let's define a simple **User** class:

```kotlin
@RoomCompanion(primaryKeys = ["id"])
data class User (@JvmField val id: Int = 0) {
    @JvmField var firstName: String? = null
    @JvmField var lastName: String? = null
    @JvmField var age: Int = 0
    @JvmField var phoneNumber: String? = null
    @JvmField var paid: Boolean = false
}
```
Compile your code and then you can use class **UserDao** or **UserDatabase** in your code. If you don't know how to use these two classes, please refer to the [Android Room Library](https://developer.android.com/topic/libraries/architecture/room) document for more information. 

Since the code genereated in this library are Jave codes, **@JvmField** should be annotated on each filed of the class. Otherwise, you will get compile errors with fields accesibility issue in generated codes.

## Generated codes structures



## Annotations

### RoomCompanion
It is the core annotation of this library and will help you generate companion classes which will be used by Android Room Library. Here is a complete example:

#### User.kt

```kotlin
@RoomCompanion(primaryKeys = ["id"], 
        database = "user",
        extension = UserDaoExtension::class,
        converters = [UUIDConverter::class, DateConverter::class],
        foreignKeys = [ForeignKey(entity = Group::class,
                parentColumns = ["id"],
                childColumns = ["group_id"],
                onDelete = ForeignKey.CASCADE
        )],
        pageSize = 50
)
data class User (@JvmField val id: UUID, 
                 @JvmField val name: String) {
    @JvmField var firstName: String? = null
    @JvmField var lastName: String? = null
    @JvmField var age: Int = 0
    @JvmField var phoneNumber: String? = null
    @JvmField var paid: Boolean = false
    @JvmField var groupId: UUID? = null
}
```

#### Group.kt

```kotlin
@RoomCompanion(primaryKeys = ["id"],
        database = "user",
        indices = [ Index(value = ["name"])]
)
data class Group(@JvmField val id: UUID,
                 @JvmField val name: String) {

    @JvmField var createdTime: Date? = null
}
```
Here we defined two classes **User** and **Group** and their relationship. Both of them are using UUID as primary key and a user might belongs to a group through a foreign key constraint. 

#### Parameters

### DaoExtension

### Page